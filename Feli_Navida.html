<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PARA MI JOSSI</title>
    <style>
        /* Fuentes: Cinzel (Medieval/T√≠tulos) y Pinyon Script (Manuscrito elegante) */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Pinyon+Script&family=Cinzel:wght@400;600&display=swap');

        :root {
            /* Paleta Medieval Real */
            --fondo-oscuro: #1a0524; /* Morado casi negro */
            --fondo-gradiente: radial-gradient(circle at center, #3b0764 0%, #1a0524 100%);
            
            --pergamino-bg: #f3e5ab; /* Color pergamino */
            --pergamino-borde: #d4c59a;
            
            --tinta-medieval: #422006; /* Marr√≥n oscuro antiguo */
            --dorado: #d4af37; /* Oro met√°lico */
            --dorado-brillo: #fadd7f;
            
            --lacre-rojo: #8a1c1c;
            --lacre-borde: #601010;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--fondo-oscuro);
            background-image: 
                var(--fondo-gradiente),
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239c27b0' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Cinzel', serif;
            overflow: hidden;
            position: relative;
        }

        /* --- Nieve Sutil --- */
        #lienzo-nieve {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* --- Control de M√∫sica --- */
        .control-musica {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--dorado);
            color: var(--dorado);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
            opacity: 0.7;
            display: none; /* Se muestra al abrir */
        }

        .control-musica:hover {
            opacity: 1;
            background: rgba(0, 0, 0, 0.6);
            transform: scale(1.1);
        }

        /* --- LOGIN (Sobre Medieval) --- */
        #contenedor-login {
            position: relative;
            z-index: 20;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        #contenedor-login.oculto {
            opacity: 0;
            transform: scale(0.9) translateY(20px);
            pointer-events: none;
        }

        /* Estilo del Sobre Pergamino */
        .sobre-medieval {
            width: 340px;
            height: 220px;
            background: #e6d5a7; /* Pergamino oscuro */
            position: relative;
            border-radius: 4px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Para contener las solapas */
            border: 1px solid #c9b684;
        }

        /* Textura de papel en el sobre */
        .sobre-medieval::before {
            content: '';
            position: absolute;
            top:0; left:0; width:100%; height:100%;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.5' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.15'/%3E%3C/svg%3E");
            opacity: 0.6;
            pointer-events: none;
        }

        /* Solapas Triangulares CSS */
        .solapa-izquierda {
            position: absolute;
            top: 0; left: 0;
            width: 0; height: 0;
            border-style: solid;
            border-width: 110px 170px 110px 0;
            border-color: transparent transparent transparent #dcc896;
            z-index: 2;
        }
        .solapa-derecha {
            position: absolute;
            top: 0; right: 0;
            width: 0; height: 0;
            border-style: solid;
            border-width: 110px 0 110px 170px;
            border-color: transparent #d4c08e transparent transparent;
            z-index: 2;
        }
        .solapa-inferior {
            position: absolute;
            bottom: 0; left: 0;
            width: 0; height: 0;
            border-style: solid;
            border-width: 0 170px 120px 170px;
            border-color: transparent transparent #e6d5a7 transparent;
            z-index: 3;
            filter: drop-shadow(0 -2px 2px rgba(0,0,0,0.1));
        }
        .solapa-superior {
            position: absolute;
            top: 0; left: 0;
            width: 0; height: 0;
            border-style: solid;
            border-width: 120px 170px 0 170px;
            border-color: #f0e2b6 transparent transparent transparent;
            z-index: 4;
            transform-origin: top;
            transition: transform 0.6s ease;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.1));
        }

        /* Contenido interactivo (Input) */
        .interfaz-sobre {
            position: absolute;
            z-index: 10;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        /* Input con estilo m√°gico */
        input[type="text"] {
            background: rgba(26, 5, 36, 0.7);
            border: 1px solid var(--dorado);
            padding: 8px 12px;
            color: var(--dorado-brillo);
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            text-align: center;
            width: 160px;
            border-radius: 4px;
            outline: none;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.1);
        }

        input[type="text"]::placeholder {
            color: rgba(212, 175, 55, 0.5);
            font-style: italic;
        }

        input[type="text"]:focus {
            background: rgba(26, 5, 36, 0.9);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.4);
            width: 180px;
        }

        /* Bot√≥n Sello de Lacre */
        button.boton-lacre {
            width: 55px;
            height: 55px;
            background: radial-gradient(circle at 30% 30%, #a52a2a, #601010);
            border-radius: 50%;
            border: 3px solid #4a0a0a;
            color: #d8b4b4;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            box-shadow: 2px 4px 6px rgba(0,0,0,0.4), inset 2px 2px 5px rgba(255,255,255,0.2);
            position: relative;
            transition: transform 0.2s;
        }
        
        button.boton-lacre::after {
            content: '';
            position: absolute;
            top: 5px; left: 5px; right: 5px; bottom: 5px;
            border: 1px dashed rgba(255,255,255,0.2);
            border-radius: 50%;
        }

        button.boton-lacre:hover { transform: scale(1.05); }
        button.boton-lacre:active { transform: scale(0.95); }

        .temblor {
            animation: temblor 0.4s cubic-bezier(.36,.07,.19,.97) both;
            border-color: #ef4444 !important;
        }
        @keyframes temblor {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* --- CARTA (Pergamino Real) --- */
        #contenedor-carta {
            display: none; /* Se maneja via JS a 'block' para scroll correcto */
            width: 100%;
            height: 100vh;
            /* Eliminamos propiedades flex que causan problemas de corte */
            overflow-y: auto; /* Permite scroll vertical */
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch; /* Scroll suave en iOS */
            padding-bottom: 50px; /* Espacio extra al final */
        }

        .pergamino {
            background: var(--pergamino-bg);
            width: 90%; /* M√°s seguro en todos los dispositivos */
            max-width: 680px; /* Ancho m√°ximo para PC */
            padding: 60px 50px; /* Padding generoso */
            position: relative;
            box-shadow: 
                0 0 0 5px rgba(212, 175, 55, 0.3), 
                0 0 20px rgba(0,0,0,0.5),
                inset 0 0 60px rgba(160, 140, 90, 0.4);
            
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.12'/%3E%3C/svg%3E");
            
            border-radius: 2px;
            transform-origin: center top;
            transform: rotateX(-90deg);
            opacity: 0;
            transition: transform 1.5s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 1s;
            
            /* Centrado via Margen */
            margin: 40px auto; 
        }

        .pergamino.abierto {
            transform: rotateX(0deg);
            opacity: 1;
        }

        /* Esquinas decorativas */
        .esquina {
            position: absolute;
            width: 40px;
            height: 40px;
            border: 2px solid var(--dorado);
            pointer-events: none;
        }
        .top-left { top: 15px; left: 15px; border-right: none; border-bottom: none; }
        .top-right { top: 15px; right: 15px; border-left: none; border-bottom: none; }
        .bottom-left { bottom: 15px; left: 15px; border-right: none; border-top: none; }
        .bottom-right { bottom: 15px; right: 15px; border-left: none; border-top: none; }

        .contenido-texto {
            text-align: center;
            color: var(--tinta-medieval);
        }

        .saludo-real {
            font-family: 'Pinyon Script', cursive; /* Aseguramos cursiva */
            font-size: 2.8rem;
            margin-bottom: 2rem;
            font-weight: bold;
        }

        .cuerpo-real {
            font-family: 'Pinyon Script', cursive; /* Aseguramos cursiva */
            font-size: 1.5rem; /* Tama√±o legible pero no gigante */
            line-height: 1.6;
            margin-bottom: 2rem;
            text-align: left; /* Alineado a la izquierda para mejor lectura */
            overflow-wrap: break-word; /* Evita que palabras largas se salgan */
            word-wrap: break-word;
        }

        .firma-real {
            font-family: 'Cinzel Decorative', cursive;
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--tinta-medieval);
            margin-top: 2rem;
            color: #6b21a8;
        }

        /* --- ILUSTRACI√ìN √ÅRBOL Y REGALOS --- */
        .escena-navidad {
            margin-top: 3rem;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 120px;
        }
        
        .svg-navidad {
            width: 100%;
            height: 100%;
            max-width: 250px;
            overflow: visible;
        }

        /* Animaciones SVG */
        .arbol-capa { fill: #3f6212; }
        .arbol-adorno { fill: #dc2626; animation: brillar 2s infinite alternate; }
        .regalo-caja { fill: #7e22ce; }
        .regalo-lazo { fill: #facc15; }
        .estrella { fill: #fbbf24; animation: girar 8s linear infinite; transform-origin: center; }

        @keyframes brillar { 0% { opacity: 0.6; } 100% { opacity: 1; } }
        @keyframes girar { 100% { transform: rotate(360deg); } }

        /* Media Queries para M√≥viles */
        @media (max-width: 480px) {
            .pergamino { 
                padding: 40px 25px; /* Menos padding en m√≥vil */
                width: 95%; 
                margin: 20px auto;
            }
            .cuerpo-real { font-size: 1.2rem; } 
            .saludo-real { font-size: 1.8rem; }
            .sobre-medieval { width: 280px; height: 190px; }
            
            .solapa-izquierda { border-width: 95px 140px 95px 0; }
            .solapa-derecha { border-width: 95px 0 95px 140px; }
            .solapa-inferior { border-width: 0 140px 100px 140px; }
            .solapa-superior { border-width: 100px 140px 0 140px; }
        }
    </style>
</head>
<body>

    <canvas id="lienzo-nieve"></canvas>

    <!-- Bot√≥n de m√∫sica -->
    <div class="control-musica" id="boton-musica" title="Pausar/Reproducir">‚ô´</div>

    <!-- Elemento de Audio Oculto -->
    <audio id="reproductor-audio" loop>
        <source src="home.mp3" type="audio/mp3">
        Tu navegador no soporta audio.
    </audio>

    <!-- PANTALLA 1: Login (Sobre Medieval) -->
    <div id="contenedor-login">
        <div class="sobre-medieval">
            <!-- Solapas -->
            <div class="solapa-izquierda"></div>
            <div class="solapa-derecha"></div>
            <div class="solapa-inferior"></div>
            <div class="solapa-superior" id="solapa-top"></div>

            <!-- Interfaz -->
            <div class="interfaz-sobre">
                <input type="text" id="entrada-clave" placeholder="" autocomplete="off">
                <button class="boton-lacre" id="boton-abrir">‚öú</button>
            </div>
        </div>
    </div>

    <!-- PANTALLA 2: La Carta (Pergamino) -->
    <div id="contenedor-carta">
        <div class="pergamino" id="pergamino">
            <!-- Marcos Decorativos -->
            <div class="esquina top-left"></div>
            <div class="esquina top-right"></div>
            <div class="esquina bottom-left"></div>
            <div class="esquina bottom-right"></div>

            <div class="contenido-texto">
                
                <div class="saludo-real">PARA  MI  PRINCESA</div>
                
                <div class="cuerpo-real">
                    Hola princesa, buenas noches, adivina qu√©, ma√±ana es navidad o bueno, dentro de pocas horas es navidad. Quiero desear que te la pases muy bien el d√≠a de hoy, espero que reciban muy buenos regalos. Perd√≥name por no poder darte uno, yo estoy seguro de que s√≠ recibir√© uno, o bueno, ya lo recib√≠ desde hace mucho tiempo, y sabes cu√°l fue: fue tu compa√±√≠a.
                    <br><br>
                    Me alegra poder haber conocido a una mujer como t√∫, una mujer que es empoderada, una mujer que me ha demostrado que puede con todo, una mujer que para m√≠, ante mis ojos es mejor que las dem√°s. Me alegra de que sea mi princesa, aunque ya casi no hablamos, aunque casi no nos vemos pero est√° en un pedazo de mi coraz√≥n.
                    <br><br>
                    D√©jeme decirle, quiero hacerle saber, que yo la quiero y la amo mucho, aunque tal vez no sea rec√≠proco, pero no me importa. Yo nunca he esperado nada de nadie y eso te incluye a usted; a m√≠ no me gusta que hagan cosas por m√≠, yo me conformo con que la persona por la que hago cosas sea feliz y esa persona es usted. Yo no hago cosas por usted ni le regalo cosas para que usted me quiera, solo es para que sepa usted que yo la amo.
                    <br><br>
                    Y recuerde esto, aunque nadie la ame a usted, yo la amar√© siempre. S√© que se convertir√° en una gran mujer, en una gran ingeniera, y quiero ver eso a su lado, y s√© que podr√°, as√≠ que usted √©chele todas las ganas del mundo y espero que est√© usted orgullosa de usted misma. Le deseo una muy bonita navidad mi princesa, mi pandita rojo, mi coraz√≥n de mel√≥n, y mi futura ingeniera.
                </div>

                <div class="firma-real">FELIZ NAVIDAD üíú</div>

                <!-- Ilustraci√≥n SVG: √Årbol y Regalos -->
                <div class="escena-navidad">
                    <svg class="svg-navidad" viewBox="0 0 200 100" preserveAspectRatio="xMidYBottom">
                        <!-- Regalo Izquierda -->
                        <rect x="40" y="70" width="25" height="25" class="regalo-caja" fill="#9333ea" />
                        <rect x="50" y="70" width="5" height="25" class="regalo-lazo" />
                        <rect x="40" y="80" width="25" height="5" class="regalo-lazo" />
                        
                        <!-- Regalo Derecha -->
                        <rect x="135" y="75" width="20" height="20" class="regalo-caja" fill="#be185d" />
                        <rect x="143" y="75" width="4" height="20" class="regalo-lazo" />
                        
                        <!-- √Årbol -->
                        <polygon points="100,10 70,95 130,95" class="arbol-capa" />
                        <polygon points="100,10 80,60 120,60" class="arbol-capa" fill="#4d7c0f" />
                        <polygon points="100,10 90,35 110,35" class="arbol-capa" fill="#65a30d" />
                        
                        <!-- Estrella -->
                        <path class="estrella" d="M100 0 L103 7 L110 7 L105 12 L107 19 L100 15 L93 19 L95 12 L90 7 L97 7 Z" />

                        <!-- Adornos -->
                        <circle cx="90" cy="80" r="3" class="arbol-adorno" style="animation-delay:0s"/>
                        <circle cx="110" cy="70" r="3" class="arbol-adorno" style="fill:#fbbf24; animation-delay:0.5s"/>
                        <circle cx="100" cy="50" r="3" class="arbol-adorno" style="fill:#3b82f6; animation-delay:1s"/>
                        <circle cx="95" cy="30" r="2" class="arbol-adorno" style="fill:#ec4899; animation-delay:1.5s"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            /* --- NIEVE --- */
            const lienzo = document.getElementById('lienzo-nieve');
            const contexto = lienzo.getContext('2d');
            let ancho, alto;
            const copos = [];

            function ajustarTamano() {
                ancho = lienzo.width = window.innerWidth;
                alto = lienzo.height = window.innerHeight;
            }
            window.addEventListener('resize', ajustarTamano);
            ajustarTamano();

            class Copo {
                constructor() {
                    this.resetear();
                }
                resetear() {
                    this.x = Math.random() * ancho;
                    this.y = Math.random() * -alto;
                    this.velocidad = Math.random() * 1 + 0.5;
                    this.tamano = Math.random() * 2 + 1;
                    this.opacidad = Math.random() * 0.4 + 0.1;
                }
                actualizar() {
                    this.y += this.velocidad;
                    if (this.y > alto) this.resetear();
                }
                dibujar() {
                    contexto.fillStyle = `rgba(255, 255, 255, ${this.opacidad})`;
                    contexto.beginPath();
                    contexto.arc(this.x, this.y, this.tamano, 0, Math.PI * 2);
                    contexto.fill();
                }
            }

            for(let i=0; i<50; i++) copos.push(new Copo());

            function animar() {
                contexto.clearRect(0, 0, ancho, alto);
                copos.forEach(c => { c.actualizar(); c.dibujar(); });
                requestAnimationFrame(animar);
            }
            animar();

            /* --- L√ìGICA DE APERTURA --- */
            const entrada = document.getElementById('entrada-clave');
            const boton = document.getElementById('boton-abrir');
            const contenedorLogin = document.getElementById('contenedor-login');
            const contenedorCarta = document.getElementById('contenedor-carta');
            const pergamino = document.getElementById('pergamino');
            const solapaSuperior = document.getElementById('solapa-top');
            
            const audio = document.getElementById('reproductor-audio');
            const botonMusica = document.getElementById('boton-musica');
            let reproduciendo = false;

            function verificar() {
                const valor = entrada.value.trim().toLowerCase();
                if (valor === 'home') {
                    iniciarApertura();
                } else {
                    entrada.classList.add('temblor');
                    entrada.style.borderColor = '#ef4444';
                    setTimeout(() => {
                        entrada.classList.remove('temblor');
                        entrada.style.borderColor = '#d4af37';
                    }, 500);
                }
            }

            function iniciarApertura() {
                // Iniciar Audio
                audio.play().then(() => {
                    reproduciendo = true;
                    botonMusica.style.display = 'flex'; 
                }).catch(e => {
                    console.log("Audio no autom√°tico", e);
                    botonMusica.style.display = 'flex'; 
                });

                // Animaci√≥n Sobre
                solapaSuperior.style.transform = "rotateX(180deg)";
                solapaSuperior.style.zIndex = "1"; 
                
                // Transici√≥n a Carta
                setTimeout(() => {
                    contenedorLogin.classList.add('oculto');
                    
                    setTimeout(() => {
                        contenedorLogin.style.display = 'none';
                        // IMPORTANTE: Se usa 'block' para que funcione el scroll normal
                        contenedorCarta.style.display = 'block'; 
                        
                        setTimeout(() => {
                            pergamino.classList.add('abierto');
                        }, 100);
                    }, 600);
                }, 400);
            }

            botonMusica.addEventListener('click', () => {
                if (reproduciendo) {
                    audio.pause();
                    reproduciendo = false;
                    botonMusica.style.opacity = "0.5";
                } else {
                    audio.play();
                    reproduciendo = true;
                    botonMusica.style.opacity = "1";
                }
            });

            boton.addEventListener('click', verificar);
            entrada.addEventListener('keypress', (evento) => {
                if(evento.key === 'Enter') verificar();
            });

        })();
    </script>
</body>
</html>